<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ChuckHill2.Utilities: XmlDiffMerge – A simple 3-way diff and merge</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="Doxygen_Extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ProjectLogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ChuckHill2.Utilities
   &#160;<span id="projectnumber">1.0.1.0</span>
   </div>
   <div id="projectbrief">C# WinForms Utility Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">XmlDiffMerge – A simple 3-way diff and merge </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Supports 3-way merging of XML file settings. An example demo console app is also provided.</p>
<h2><a class="anchor" id="autotoc_md25"></a>
Introduction</h2>
<p>When deploying .NET applications, it is often desirable to "merge" configuration settings between "distribution"&#160;*.config*&#160;files and existing&#160;*.config*&#160;files. Be they Web.config, App.config, or other some other custom XML files.</p>
<p>This is particularly useful when new config parameters are added to a "distribution" config file, and an existing&#160;*.config*&#160;file (such as on an already-configured server) must have these new parameters added, while preserving existing parameter settings.</p>
<p>The XmlDiffMerge class supports merging of any similar XML&#160;files. Not only *.config* files.</p>
<p>XmlDiffMerge intelligently handles XML namespaces (like that in *.csproj* or *.resx*).</p>
<h2><a class="anchor" id="autotoc_md26"></a>
Example Usage Scenario #1</h2>
<p>All three XML files should be similar although not the same.</p>
<p>Where:\ originalFile = the xml file before any changes were made to.\ modifiedFile = the original xml file containing changes.\ targetFile = the new xml file to be updated.</p>
<p>In the simplest case,</p>
<div class="fragment"><div class="line">var xdiffmerge = new XmlDiffMerge(originalFile, modifiedFile);</div>
<div class="line"> </div>
<div class="line">bool success = xdiffmerge.ApplyTo(targetFile);</div>
</div><!-- fragment --><p>That’s it.</p>
<h2><a class="anchor" id="autotoc_md27"></a>
Example Usage Scenario #2</h2>
<p>If array elements (repeating elements with the same name) do not have an attribute key (e.g. ‘name=’, ‘id=’, ‘key=’) to make them unique, then they are handled in indexed order. If any of these array elements are added or removed (modified is ok), this can be a problem as subsequent array elements will no longer have the same index.</p>
<p>This is handled by a caller-defined preprocessor method to create unique temporary attribute keys based upon the array element contents. Now, index order is not a problem.</p>
<p>The preprocessor method may also be used to hide any potential changes by removing elements from the DOM in both the original and modified files as only differences in the two DOMs are detected.</p>
<div class="fragment"><div class="line">var xdiffmerge = new XmlDiffMerge(originalFile, modifiedFile,</div>
<div class="line">InsertNameAttributes);</div>
<div class="line"> </div>
<div class="line">bool success = xdiffmerge.ApplyTo(result, InsertNameAttributes,</div>
<div class="line">RemoveNameAttributes);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md28"></a>
Summary</h2>
<p>Both of these scenarios are shown in the example console app.</p>
<p>The differences may also be serialized/deserialized so one may review the changes before applying them to the target file. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
